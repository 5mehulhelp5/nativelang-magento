<?php
/**
 * @var \NativeMind\Translation\Block\Adminhtml\Translation\Dashboard $block
 */
?>
<div class="admin__page-section">
    <div class="admin__page-section-title">
        <span class="title"><?= $block->escapeHtml(__('Translation Dashboard')) ?></span>
    </div>
    <div class="admin__page-section-content">
        
        <!-- Quick Actions -->
        <div class="admin__page-section-item">
            <div class="admin__page-section-item-title">
                <span class="title"><?= $block->escapeHtml(__('Quick Actions')) ?></span>
            </div>
            <div class="admin__page-section-item-content">
                <div class="translation-quick-actions">
                    <a href="<?= $block->escapeUrl($block->getTranslateProductsUrl()) ?>" class="action-primary scalable">
                        <span><?= $block->escapeHtml(__('Translate Products')) ?></span>
                    </a>
                    <a href="<?= $block->escapeUrl($block->getTranslateCategoriesUrl()) ?>" class="action-secondary scalable">
                        <span><?= $block->escapeHtml(__('Translate Categories')) ?></span>
                    </a>
                    <a href="<?= $block->escapeUrl($block->getSettingsUrl()) ?>" class="action-default scalable">
                        <span><?= $block->escapeHtml(__('Settings')) ?></span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Overall Statistics -->
        <?php $overallStats = $block->getOverallStats(); ?>
        <div class="admin__page-section-item">
            <div class="admin__page-section-item-title">
                <span class="title"><?= $block->escapeHtml(__('Overall Statistics')) ?></span>
            </div>
            <div class="admin__page-section-item-content">
                <div class="translation-stats-grid">
                    <div class="stat-item">
                        <div class="stat-number"><?= $block->escapeHtml($overallStats->getTotalProducts()) ?></div>
                        <div class="stat-label"><?= $block->escapeHtml(__('Total Products')) ?></div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number"><?= $block->escapeHtml($overallStats->getTranslatedProducts()) ?></div>
                        <div class="stat-label"><?= $block->escapeHtml(__('Translated Products')) ?></div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number"><?= $block->escapeHtml($overallStats->getPendingProducts()) ?></div>
                        <div class="stat-label"><?= $block->escapeHtml(__('Pending Products')) ?></div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number"><?= $block->escapeHtml($overallStats->getErrorProducts()) ?></div>
                        <div class="stat-label"><?= $block->escapeHtml(__('Error Products')) ?></div>
                    </div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-bar-label">
                        <?= $block->escapeHtml(__('Translation Progress')) ?>: 
                        <?= $block->escapeHtml($block->formatPercentage($overallStats->getTranslatedProducts(), $overallStats->getTotalProducts())) ?>
                    </div>
                    <div class="progress-bar-container">
                        <?php $percentage = $overallStats->getTotalProducts() > 0 ? ($overallStats->getTranslatedProducts() / $overallStats->getTotalProducts()) * 100 : 0; ?>
                        <div class="progress-bar-fill" style="width: <?= $block->escapeHtmlAttr($percentage) ?>%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Store Statistics -->
        <div class="admin__page-section-item">
            <div class="admin__page-section-item-title">
                <span class="title"><?= $block->escapeHtml(__('Store Statistics')) ?></span>
            </div>
            <div class="admin__page-section-item-content">
                <table class="admin__table-secondary">
                    <thead>
                        <tr>
                            <th><?= $block->escapeHtml(__('Store')) ?></th>
                            <th><?= $block->escapeHtml(__('Total Products')) ?></th>
                            <th><?= $block->escapeHtml(__('Translated')) ?></th>
                            <th><?= $block->escapeHtml(__('Pending')) ?></th>
                            <th><?= $block->escapeHtml(__('Errors')) ?></th>
                            <th><?= $block->escapeHtml(__('Progress')) ?></th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($block->getTranslationStats() as $storeData): ?>
                            <?php $store = $storeData['store']; $stats = $storeData['stats']; ?>
                            <tr>
                                <td><?= $block->escapeHtml($store->getName()) ?></td>
                                <td><?= $block->escapeHtml($stats->getTotalProducts()) ?></td>
                                <td><?= $block->escapeHtml($stats->getTranslatedProducts()) ?></td>
                                <td><?= $block->escapeHtml($stats->getPendingProducts()) ?></td>
                                <td><?= $block->escapeHtml($stats->getErrorProducts()) ?></td>
                                <td><?= $block->escapeHtml($block->formatPercentage($stats->getTranslatedProducts(), $stats->getTotalProducts())) ?></td>
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<style>
.translation-quick-actions {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.translation-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.stat-item {
    text-align: center;
    padding: 20px;
    background: #f5f5f5;
    border-radius: 4px;
}

.stat-number {
    font-size: 2.5em;
    font-weight: bold;
    color: #007cba;
}

.stat-label {
    font-size: 0.9em;
    color: #666;
    margin-top: 5px;
}

.progress-bar {
    margin-top: 20px;
}

.progress-bar-label {
    margin-bottom: 5px;
    font-weight: 500;
}

.progress-bar-container {
    width: 100%;
    height: 20px;
    background-color: #e0e0e0;
    border-radius: 10px;
    overflow: hidden;
}

.progress-bar-fill {
    height: 100%;
    background-color: #007cba;
    transition: width 0.3s ease;
}
</style>
